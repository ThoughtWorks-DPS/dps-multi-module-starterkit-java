info:
  app:
    name: dps-multi-module-starterkit-java
    description: Java API Starter from Template
management:
  server:
    port: 8081
  endpoint:
    health:
      probes:
        enabled: true
# Setting up K8 health probes - with health probs set to true you can use
# the paths in your config like the snippet below

#livenessProbe:
#  httpGet:
#    path: /actuator/health/liveness
#    port: 8081
#  failureThreshold: ...
#  periodSeconds: ...
#
#readinessProbe:
#  httpGet:
#    path: /actuator/health/readiness
#    port: 8081
#  failureThreshold: ...

server:
  tomcat:
    basedir: build/tomcat
    max-threads: 100
  ssl:
    enabled: false
  port: 8080

spring:
  application:
    name: "starter-api"

  datasource:
    url: jdbc:h2:mem:example;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;INIT=CREATE SCHEMA IF NOT EXISTS example\;SET SCHEMA example;
    username: skuser
    password: localT3st!
    hikari:
      jdbc-url: jdbc:h2:mem:example;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;INIT=CREATE SCHEMA IF NOT EXISTS example\;SET SCHEMA example;
      username: skuser
      password: localT3st!
  jpa:
    show-sql: false
    generate-ddl: false
    hibernate:
      ddl-auto: create
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    database-platform: org.hibernate.dialect.PostgreSQL95Dialect
    properties:
      org.hibernate.envers.audit_table_suffix: _audit
      org.hibernate.envers.revision_field_name: revision_id
      org.hibernate.envers.revision_type_field_name: type
      org.hibernate.envers.global_with_modified_flag: true
      org.hibernate.envers.store_data_at_delete: true
      hibernate:
        generate_statistics: false
        jdbc:
          lob:
            non_contextual_creation=true:
  resources:
    add-mappings: false
  mvc:
    throw-exception-if-no-handler-found: true
  http:
    encoding:
      force: true

opentracing:
  zipkin:
    enabled: true
    http-sender.baseUrl: http://zipkin.istio-system.svc.cluster.local:9411

springdoc:
  writer-with-default-pretty-printer: true
  show-actuator: true
  swagger-ui:
    operations-sorter: method

starter:
  openapi:
    authUrl: https://iam.twdps.io/whoami
    default-oauth-security-scheme: true
    default-jwt-bearer-security-scheme: true
    license: MIT License
    title: Example service
    description: Example service providing Account info
    version: v1
    licenseUrl: https://github.com/thoughtworks-dps/dps-multi-module-starterkit-java/blob/master/LICENSE
    contactEmail: FIXME@twdps.io
    contactUrl: https://example.twdps.io/
    contactName: Example
    serverUrl: http://localhost:8080

opa:
  filter:
    enabled: false
